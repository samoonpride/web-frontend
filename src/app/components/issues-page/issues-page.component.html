<div class="flex">
  <span class="mx-auto mt-10 text-3xl font-semibold">Issue Dashboard</span>
</div>

<div class="flex flex-wrap items-center justify-between w-3/4 py-4 m-auto space-y-4 flex-column md:flex-row md:space-y-0">
  <div class="flex">
    <div class="relative">
        <div class="absolute inset-y-0 flex items-center pointer-events-none rtl:inset-r-0 start-0 ps-3">
            <svg class="w-4 h-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
            </svg>
        </div>
        <input type="text" [(ngModel)]="issueSearch" (keyup)="onIssueSearchHandle()" id="table-search-users" class="px-12 input" placeholder="Search for issues">
    </div>
    <div class="flex items-center mx-4 space-x-3 text-sm font-normal">
      <button id="IN_CONSIDERATION" class="px-2 bg-gray-400 border border-gray-400 rounded-md" (click)="filterStatusSelect('IN_CONSIDERATION')">
        Considering
      </button>
      <button id="IN_PROGRESS" class="px-2 bg-yellow-300 border border-yellow-300 rounded-md" (click)="filterStatusSelect('IN_PROGRESS')">
        Progressing
      </button>
      <button id="COMPLETED" class="px-2 bg-green-400 border border-green-400 rounded-md" (click)="filterStatusSelect('COMPLETED')">
        Completed
      </button>
      <button id="DUPLICATED" class="px-2 bg-blue-400 border border-blue-400 rounded-md" (click)="filterStatusSelect('DUPLICATED')">
        Duplicated
      </button>
      <button id="SUSPENDED" class="px-2 bg-red-500 border border-red-500 rounded-md" (click)="filterStatusSelect('SUSPENDED')">
        Suspended
      </button>
      <button id="SPAM" class="px-2 border rounded-md border-violet-400 bg-violet-400" (click)="filterStatusSelect('SPAM')">
        Spam
      </button>
    </div>
  </div>
  <div class="grow"></div>
  <button class="uppercase w-28 primary-button" data-modal-target="issue-create-modal" data-modal-toggle="issue-create-modal" hidden>create</button>
</div>

<hr>

<div class="grid grid-cols-1 gap-6 mx-auto lg:grid-cols-2 w-3/4 lg:w-[95vh]">
  <div *ngFor="let issue of queriedIssues;" class="flex flex-col p-6 bg-white border border-gray-200 rounded-lg shadow">
    <div class="grow">
      <div class="flex">
        <div *ngIf="issue.thumbnailPath" class="border-[1px] border-gray-300 rounded-lg size-16">
          <img src="{{thumbnailPathUrl + issue.thumbnailPath}}" class="object-cover size-16"/>
        </div>
        <div class="grow"></div>
        <div *ngIf="issue.assigneeIds.length !== 0">
          <div class="bg-gray-800 rounded-full size-10">
            <svg class="w-10 h-10 p-1 text-[#93BFB7]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
              <path fill-rule="evenodd" d="M12 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4h-4Z" clip-rule="evenodd"/>
            </svg>
          </div>
        </div>
      </div>
      <div class="py-2 text-gray-700">
        <p>{{issue.title}}</p>
      </div>
    </div>
    <div class="flex items-end">
      <div class="grow">
        <p class="text-sm font-semibold text-gray-800">#{{issue.issueId}}</p>
      </div>
      <div [ngSwitch]="issue.status">
        <button *ngSwitchCase="'IN_CONSIDERATION'" id="considering" class="px-2 mr-4 text-sm font-medium bg-gray-400 border border-gray-400 rounded-md">
          Considering
        </button>
        <button *ngSwitchCase="'IN_PROGRESS'" id="progressing" class="px-2 mr-4 text-sm font-medium bg-yellow-300 border border-yellow-300 rounded-md" (click)="filterStatusSelect('progressing')">
          Progressing
        </button>
        <button *ngSwitchCase="'COMPLETED'" id="completed" class="px-2 mr-4 text-sm font-medium bg-green-400 border border-green-400 rounded-md" (click)="filterStatusSelect('completed')">
          Completed
        </button>
        <button *ngSwitchCase="'DUPLICATED'" id="duplicated" class="px-2 mr-4 text-sm font-medium bg-blue-400 border border-blue-400 rounded-md" (click)="filterStatusSelect('duplicated')">
          Duplicated
        </button>
        <button *ngSwitchCase="'SUSPENDED'" id="suspended" class="px-2 mr-4 text-sm font-medium bg-red-500 border border-red-500 rounded-md" (click)="filterStatusSelect('suspended')">
          Suspended
        </button>
        <button *ngSwitchCase="'SPAM'" id="spam" class="px-2 mr-4 text-sm font-medium border rounded-md border-violet-400 bg-violet-400" (click)="filterStatusSelect('spam')">
          Spam
        </button>
      </div>
      <button class="px-4 py-1 alternative-button" (click)="handleSelectedIssueClick(issue)" data-modal-target="issue-detail-modal" data-modal-toggle="issue-detail-modal">
        Edit
      </button>
      <app-issue-detail-modal [issue]="selectedIssue"></app-issue-detail-modal>
    </div>
  </div>
</div>

<app-issue-create-modal></app-issue-create-modal>
